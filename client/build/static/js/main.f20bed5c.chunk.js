(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{33:function(e,t,a){e.exports=a(64)},38:function(e,t,a){},39:function(e,t,a){e.exports=a.p+"static/media/logo.495d93cc.svg"},40:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(18),i=a.n(l),r=(a(38),a(31)),o=a(1);a(39),a(40);var c=function(e){return s.a.createElement("a",{href:e.loc},s.a.createElement("button",null,e.text))},u=a(6),m=a.n(u),d=function(){return m.a.get("/account")},h=function(e,t){return m.a.delete("/api/playlistUser/"+e+"/"+t)},f=function(e){return m.a.post("/api/users",e)},y=function(e){return m.a.get("/api/playlists/"+e)},g=function(e){return m.a.get("/api/playlistData/"+e)},p=function(e,t){return m.a.post("/api/playlist/"+e+"/"+t)},v=function(e){return m.a.get("/api/spotify/playlist/"+e)},E=function(e){return m.a.get("/api/spotify/songs/"+e)},b=function(e){return m.a.post("/api/spotify/playlist/",e)},N=function(e){return m.a.post("/api/spotify/fillplaylist/",e)};var w=function(){return s.a.createElement("div",{className:"hero is-medium is-fluid"},s.a.createElement("div",{className:"hero-body container has-text-centered "},s.a.createElement("h1",{className:"title has-text-white"},"inTune"),s.a.createElement("h2",{className:"subtitle has-text-white"},"for Spotify"),s.a.createElement("a",{className:"button is-success",href:"http://localhost:3001/auth/spotify"},"Start")))};var U=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"ON LOGIN"),s.a.createElement(c,{text:"login",loc:"/select"}),s.a.createElement(c,{text:"signup",loc:"/signup"}))};var O=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"ON Signup"))},S=a(8);a(58);var j=function(e){return s.a.createElement("a",{href:"/select"},s.a.createElement("img",{className:"profImg",src:e.img}))};var k=function(){var e=Object(n.useState)({}),t=Object(S.a)(e,2),a=(t[0],t[1]),l=Object(n.useState)(""),i=Object(S.a)(l,2),r=i[0],o=i[1];return Object(n.useEffect)((function(){d().then((function(e){a(e.data),o(e.data._json.images[0].url),console.log(r)}))}),[]),s.a.createElement("div",null,s.a.createElement(j,{img:r}),s.a.createElement("div",{className:"hero is-medium is-fluid"},s.a.createElement("div",{className:"hero-body container has-text-centered "},s.a.createElement("h1",{className:"title has-text-white"},"Home"),s.a.createElement("h1",{className:"subtitle has-text-white"},"What would you like to do?"),s.a.createElement("a",{className:"button is-success",href:"/newset"}," Create New Set"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("a",{className:"button is-success",href:"/previous"}," Previous Set"))))},I=a(16),P=a(11),x=a(12),C=a(9),A=a(14),T=a(13),B=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target.value,a=e.target.name;n.setState(Object(I.a)({},a,t))},n.state={user:"",img:"",newPlaylistName:""},n.createNewCollection=n.createNewCollection.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var e=this;d().then((function(t){e.setState({user:t.data}),e.setState({img:t.data._json.images[0].url}),console.log(e.state.user)}))}},{key:"createNewCollection",value:function(e){e.preventDefault(),f({ownerId:this.state.user.id,ownerUsername:this.state.user.displayName,playlistName:this.state.newPlaylistName,userIds:[]}).then((function(e){return window.location.assign("/previous")}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(j,{img:this.state.img}),s.a.createElement("div",{className:"hero is-medium is-fluid"},s.a.createElement("div",{className:"hero-body container has-text-centered "},s.a.createElement("h1",{className:"title has-text-white"},"NEW SET"),s.a.createElement("input",{className:"input",name:"newPlaylistName",placeholder:"Name of Playlist",onChange:this.handleInputChange,value:this.state.newPlaylistName}),s.a.createElement("a",{href:"/previous",className:"button is-success",onClick:this.createNewCollection},"Submit"))))}}]),a}(n.Component);var D=function(e){return s.a.createElement("li",null,s.a.createElement("a",{className:"button mb-1",href:"/playlist/"+e.id},e.name))},_=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).state={user:"",img:"",playlists:[]},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var e=this;d().then((function(t){e.setState({user:t.data}),e.setState({img:t.data._json.images[0].url}),console.log(e.state.user),e.loadUserPlaylists(e.state.user.id)}))}},{key:"loadUserPlaylists",value:function(e){var t=this;y(e).then((function(e){console.log("INDEX"),console.log(e.data),t.setState({playlists:e.data}),console.log("state"),console.log(t.state.playlists)}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(j,{img:this.state.img}),s.a.createElement("div",{className:"hero is-medium is-fluid"},s.a.createElement("div",{className:"hero-body container has-text-centered "},s.a.createElement("h1",{className:"title has-text-white"},this.state.user.displayName,"'s Playlists"),s.a.createElement("ul",null,this.state.playlists.map((function(e){return s.a.createElement(D,{key:e._id,id:e._id,name:e.playlistName})}))))))}}]),a}(n.Component);var L=function(e){return s.a.createElement("li",{className:"has-text-white mb-2 is-uppercase is-size-4"},e.displayName," ",s.a.createElement("a",{className:"button is-danger",id:e.id,onClick:function(){return t=e.id,console.log(e.playlistId),void h(t,e.playlistId).then((function(e){console.log(e.data),window.location.reload()}));var t}},"remove"))},R=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target.value,a=e.target.name;n.setState(Object(I.a)({},a,t))},n.state={user:"",img:"",playlistId:"",playlistName:"",playlistUsers:[],spotifyUserId:"",newUserUrl:"",arrayOfPlaylists:[],arrayOfSongs:[],songsToBeAddedToNewPlaylist:[],allSongs:[],playlistUrl:""},n.getUserId=n.getUserId.bind(Object(C.a)(n)),n.getUserPlaylistArrays=n.getUserPlaylistArrays.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var e=this;d().then((function(t){e.setState({user:t.data}),e.setState({img:t.data._json.images[0].url}),e.setState({playlistId:window.location.href.substring(window.location.href.lastIndexOf("/")+1)}),e.loadPlaylistUsers(e.state.playlistId)}))}},{key:"loadPlaylistUsers",value:function(e){var t=this;g(e).then((function(e){t.setState({playlistName:e.data.playlistName}),t.setState({playlistUsers:e.data.userIds})}))}},{key:"getUserId",value:function(){var e=this,t=this.state.newUserUrl.substring(this.state.newUserUrl.lastIndexOf("user/")+5),a=this.state.newUserUrl.substring(this.state.newUserUrl.lastIndexOf("?si"));t=t.replace(a," "),this.setState({spotifyUserId:t},(function(){e.addUser()}))}},{key:"addUser",value:function(){p(this.state.playlistId,this.state.spotifyUserId).then((function(e){return window.location.reload()}))}},{key:"getUserPlaylistArrays",value:function(){for(var e=this,t=function(t){var a=e.state.playlistUsers[t];v(a).then((function(t){for(var a=t.data,n=0;n<a.length;n++){var s=a[n];if(s.name.toLowerCase().includes("work")){var l=e.state.arrayOfPlaylists;e.setState({arrayOfPlaylists:l.concat(s)})}}})).then((function(){t+1===e.state.playlistUsers.length&&e.getUserSongsArrays()}))},a=0;a<this.state.playlistUsers.length;a++)t(a)}},{key:"getUserSongsArrays",value:function(){for(var e=this,t=function(t){var a=e.state.arrayOfPlaylists[t];E(a.id).then((function(t){var a=t.data,n=[];a.forEach((function(t){n.push(t.track.id),e.state.allSongs.push(t.track.id)}))})).then((function(){t+1===e.state.arrayOfPlaylists.length&&(e.setState({songsToBeAddedToNewPlaylist:e.compareArrays.apply(e,e.state.arrayOfSongs)}),e.makePlaylist())}))},a=0;a<this.state.arrayOfPlaylists.length;a++)t(a)}},{key:"makePlaylist",value:function(){var e=this,t={songs:this.state.songsToBeAddedToNewPlaylist,id:this.state.user.id,playlistName:this.state.playlistName};b(t).then((function(t){e.finishPlaylist(t.data)}))}},{key:"finishPlaylist",value:function(e){console.log("HERE"),console.log(this.state.allSongs);var t={id:e,allSongs:this.state.allSongs};N(t).then((function(e){document.getElementById("genPlayBtn").style.visibility="visible",document.getElementById("loading").style.visibility="hidden",window.open(e.data)}))}},{key:"compareArrays",value:function(e){for(var t=[],a=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var s=function(e){t[e].forEach((function(n){for(var s=0;s<t.length;s++)e!==s&&t[s].includes(n)&&!a.includes(n)&&a.push(n)}))},l=0;l<t.length;l++)s(l);return a}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(j,{img:this.state.img}),s.a.createElement("div",{className:"hero is-medium is-fluid"},s.a.createElement("div",{className:"hero-body container has-text-centered "},s.a.createElement("h1",{className:"title has-text-white"},this.state.playlistName),s.a.createElement("ul",null,this.state.playlistUsers.map((function(t){return s.a.createElement(L,{key:t,id:t,displayName:t,playlistId:e.state.playlistId})})),s.a.createElement("input",{className:"input mb-1",name:"newUserUrl",placeholder:"URL of New User",onChange:this.handleInputChange,value:this.state.newUserUrl}),s.a.createElement("a",{className:"button is-success mb-6",onClick:this.getUserId},"ADD NEW USER")),s.a.createElement("p",null),s.a.createElement("a",{className:"button is-success",id:"genPlayBtn",onClick:function(){e.getUserPlaylistArrays(),document.getElementById("genPlayBtn").style.visibility="hidden",document.getElementById("loading").style.visibility="visible"}},"GENERATE PLAYLIST"),s.a.createElement("progress",{id:"loading",style:{visibility:"hidden"},className:"progress is-medium is-success mt-6",max:"100"},"15%"))))}}]),a}(n.Component);var W=function(){var e=Object(n.useState)({}),t=Object(S.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),r=Object(S.a)(i,2),o=r[0],c=r[1];return Object(n.useEffect)((function(){d().then((function(e){l(e.data),c(e.data._json.images[0].url),console.log(e.data)}))}),[]),s.a.createElement("div",null,s.a.createElement("h1",null,"TEST PAGE"),s.a.createElement("p",null,"USERNAME: ",a.displayName),s.a.createElement("a",{href:"/test2"},s.a.createElement("img",{src:o})),s.a.createElement(j,{img:o}),s.a.createElement("button",{onClick:function(){return console.log(function(e){for(var t=[],a=[],n=0;n<arguments.length;n++)console.log(arguments[n]),t[n]=arguments[n];for(var s=function(e){t[e].forEach((function(n){for(var s=0;s<t.length;s++)e!==s&&t[s].includes(n)&&!a.includes(n)&&a.push(n)}))},l=0;l<t.length;l++)s(l);return a}([1,2,3],[2,5,8,7],[5,2,1,4],[4,3],[7]))}},"Test"))};var M=function(){var e=Object(n.useState)({}),t=Object(S.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),r=Object(S.a)(i,2),o=r[0],c=r[1];return Object(n.useEffect)((function(){d().then((function(e){l(e.data),c(e.data._json.images[0].url),console.log(o)}))}),[]),s.a.createElement("div",null,s.a.createElement("h1",null,"TEST PAGE"),s.a.createElement("p",null,"USERNAME: ",a.displayName),s.a.createElement("img",{src:o}))};var G=function(){return s.a.createElement(r.a,null,s.a.createElement("div",null,s.a.createElement(o.c,null,s.a.createElement(o.a,{exact:!0,path:"/"},s.a.createElement(w,null)),s.a.createElement(o.a,{exact:!0,path:"/login"},s.a.createElement(U,null)),s.a.createElement(o.a,{exact:!0,path:"/signup"},s.a.createElement(O,null)),s.a.createElement(o.a,{exact:!0,path:"/select"},s.a.createElement(k,null)),s.a.createElement(o.a,{exact:!0,path:"/newset"},s.a.createElement(B,null)),s.a.createElement(o.a,{exact:!0,path:"/previous"},s.a.createElement(_,null)),s.a.createElement(o.a,{path:"/playlist/"},s.a.createElement(R,null)),s.a.createElement(o.a,{exact:!0,path:"/test"},s.a.createElement(W,null)),s.a.createElement(o.a,{exact:!0,path:"/test2"},s.a.createElement(M,null)))))},H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(s.a.createElement(G,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");H?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):J(e)}))}}()}},[[33,1,2]]]);
//# sourceMappingURL=main.f20bed5c.chunk.js.map